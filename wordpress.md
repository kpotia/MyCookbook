# Wordpress Cookbook 
[TOC]
## import website with ai1wm
1. upload file in the ai1wm-backup folder 
2. install and activate ai1wm plugin 
3. then go to the backup menu, select the backup and launch the backup.

## Add post from a Form. 
> generated by ChatGPT and reviewed by Kpotia
To add a post from a form on the front-end of a WordPress site, you can follow these general steps:

1. Create a custom form on the front site that includes the fields you want to use for the post data, such as title, content, author name, and file uploads for attachments.

2. On the form submission, use PHP to process the data and create the post. You can use the wp_insert_post() function to create a new post with the provided data.

3. Set the post author based on the provided author name. You can use the get_user_by() function to get the user object for the provided name, and then use the ID property of that object as the author ID for the post.

4. For any file uploads, you can use the wp_handle_upload() function to handle the upload and return an array with information about the uploaded file. You can then use this information to create an attachment post for the file using the wp_insert_attachment() function.

5. Finally, use the wp_update_attachment_metadata() function to add the necessary metadata for the attachment post, such as the file URL and file type.

6. Once the post and attachment posts are created, you can redirect the user to the newly created post using the get_permalink() function to get the URL of the post.

```php 
// Process form data
if ( isset( $_POST['submit'] ) ) {
    // Get post data from form
    $post_title = sanitize_text_field( $_POST['post_title'] );
    $post_content = wp_kses_post( $_POST['post_content'] );
    $author_name = sanitize_text_field( $_POST['author_name'] );
    $file_upload = $_FILES['file_upload'];

    // Set up post data
    $post_data = array(
        'post_title' => $post_title,
        'post_content' => $post_content,
        'post_author' => 0, // Will set this later
        'post_type' => 'post',
        'post_status' => 'publish'
    );

    // Insert post and get post ID
    $post_id = wp_insert_post( $post_data );

    // Set post author based on provided name
    $user = get_user_by( 'login', $author_name );
    if ( $user ) {
        wp_update_post( array(
            'ID' => $post_id,
            'post_author' => $user->ID
        ) );
    }

    // Handle file upload
    if ( isset( $file_upload['name'] ) && ! empty( $file_upload['name'] ) ) {
        $file_info = wp_handle_upload( $file_upload, array( 'test_form' => false ) );
        if ( $file_info && ! isset( $file_info['error'] ) ) {
            $attachment = array(
                'post_mime_type' => $file_info['type'],
                'post_title' => preg_replace( '/\.[^.]+$/', '', basename( $file_info['file'] ) ),
                'post_content' => '',
                'post_status' => 'inherit'
            );

            // Insert attachment post
            $attachment_id = wp_insert_attachment( $attachment, $file_info['file'], $post_id );

            // Update attachment metadata
            $attachment_data = wp_generate_attachment_metadata( $attachment_id, $file_info['file'] );
            wp_update_attachment_metadata( $attachment_id, $attachment_data );
        }
    }

    // Redirect to newly created post
    if ( $post_id ) {
       wp_redirect(get_permalink());
       }

```

